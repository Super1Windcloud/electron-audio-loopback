# Repository Guidelines

## Project Structure & Module Organization
The Electron entrypoint (`index.js`) wires preload (`preload.js`) and renderer logic (`render.js`), while the SDK adapters that talk to AssemblyAI, Deepgram, Gladia, Rev.ai, and Speechmatics live in `transcription/*.js`. Shared helpers stay in `utils.js`. Configuration artifacts such as `.env`, `.env.example`, `.npmrc`, `biome.json`, and `mise.toml` should be updated together so new providers can be enabled without breaking existing pipelines.

## Build, Test, and Development Commands
- `npm install` — install dependencies declared in `package.json`.
- `npm start` — run the Electron application locally using the current environment variables.
- `npm run fix` — invoke Biome to lint and format the repo in-place; always run before committing.
- `npx biome check` — dry-run lint/format to review violations without writing changes.
- `just push` — convenience recipe that stages every change, commits with the default message, and pushes to `repo/main`; customize the message before running.

## Coding Style & Naming Conventions
ESM syntax is required (`type: "module"`). Biome enforces tab indentation, double quotes, and organized imports; do not mix in prettier/eslint settings. Use `camelCase` for functions/variables, `PascalCase` for classes, and `UPPER_SNAKE_CASE` for environment keys. Keep provider-specific logic in their respective files and expose minimal async functions (e.g., `startSpeechmaticsStream`).

## Testing Guidelines
Automated tests are not yet wired (`npm test` exits early), so add Node 20 `node --test` suites under `transcription/__tests__/` when contributing new integrations. Mirror filenames (`speechmatics.test.js`) and stub external SDK calls with fixtures to keep runs deterministic. Until coverage thresholds are defined, provide manual verification steps in PRs (sample audio, transcript excerpts, screenshots).

## Commit & Pull Request Guidelines
Git history currently uses concise messages such as "update"; improve clarity by starting with the affected module (`speechmatics: handle partial transcripts`). Reference issue IDs when applicable. Every PR should include: summary of the change, testing evidence, configuration notes (new env keys, permissions), and screenshots or logs for UI/UX changes. Request review before running `just push`, or amend the autogenerated commit with `git commit --amend` to keep history meaningful.

## Security & Configuration Tips
Never commit populated `.env`; rely on `.env.example` for defaults and document new keys inside the example file. Rotate API keys for third-party transcription services immediately if logs or screenshots expose them. When sharing debug bundles, strip `node_modules` to avoid leaking licensed SDKs.
